---
name: Checks

on: [push]

jobs: 
  name: Test_and_Lint
  run-on: ubuntu-22
  steps:
  #login to docker hub
    - name: Login_to_Docker_Hub
      uses: docker/login-action@v1
      with:
        username: ${{ secrets.DOCKERHUN_USER }}
        password: ${{ secrets.DOCKERHUN_TOKEN }}
  #Checkout the Code
    - name: Checkout
      uses: actions/checkout@v2
  # Runs Unit tests
    - name: Tests
      run: docker-compose run --rm app sh -c "python manage.py test"
  #Runs Lintings using flake8
    - name: Lint
      run: docker-compose run --rm app sh -c "flake8"
